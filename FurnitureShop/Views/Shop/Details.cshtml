@model FurnitureShop.Models.Product
@{
    ViewData["Title"] = "Product Detail";
    var userInfo = Context.Session.GetString("userInfo");
}

<div class="untree_co-section product-detail-section">
    <div class="container">
        <div class="row">
            <!-- Product Image -->
            <div class="col-md-6">
                <div class="product-image">
                    <img src="~/data/products/@Model.Image"
                         alt="Product Image"
                         class="img-fluid rounded" style="width:477px;height:477px" />
                </div>
            </div>

            <!-- Product Info -->
            <div class="col-md-6">
                <h2 class="product-title mb-4">@Model.Name</h2>
                <p class="product-price text-muted">$@Model.Price</p>
                <p class="product-description mb-4">
                    @Html.Raw(Model.Description)
                </p>

                @if (string.IsNullOrEmpty(userInfo))
                {
                    <p class="alert alert-warning">Please log in to add items to your cart.</p>
                }

                <form id="addToCartForm" class="mb-4" method="post" action="@Url.Action("AddToCart", "Shop")">
                    <input type="hidden" name="productId" value="@Model.Id" />
                    <div class="row align-items-center">
                        <div class="col-auto">
                            <label for="quantity" class="form-label">Quantity</label>
                            <input type="number"
                                   id="quantity"
                                   name="quantity"
                                   class="form-control"
                                   value="1"
                                   min="1" @(string.IsNullOrEmpty(userInfo) ? "disabled" : "") />
                        </div>

                        <div class="col-auto">
                            <button type="submit" class="btn btn-primary" @(string.IsNullOrEmpty(userInfo) ? "disabled" : "")>
                                Add to Cart
                            </button>
                        </div>
                    </div>
                </form>
                <p>Số lượng tồn: @Model.Stock</p>
                <ul class="list-unstyled">
                    <li><strong>Category:</strong> @Model.Category!.Name</li>
                </ul>
            </div>
        </div>
    </div>
</div>
